<template>
  <v-container>
    <v-col cols="12">
      <v-card class="mx-10 pa-5" outlined>
        <v-card-actions>
          <span
            ><v-icon class="pl-2">mdi-account-multiple</v-icon>ห้องตรวจ</span
          >
         <!-- <v-spacer></v-spacer> <div class="pt-7 pr-2"><span :v-model="opd.customer_id_pri" >{{customer.customer_id_pri}}</span></div> -->
        </v-card-actions>
        <v-form >
          <v-container>
            <v-row>
              
              <h3 class="pl-5">ข้อมูลคนไข้</h3>
              <v-col cols="4" md="2" sm="6" pa-5 pl-3>
                <v-img
                  :src="getCustomerImage()"
                  :width="200"
                  height="200"
                  pb-5
                  lazy-src="https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png"
                  alt="alt"
                />

                <div class="pt-2">
                </div>
              </v-col>
              <!-- <v-col cols="4" md="2" sm="6" pa-5 pl-3>
                <v-img
                  :src="customer.customer_image"
                  :width="200"
                  height="200"
                  pb-5
                  lazy-src="https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png"
                  alt="alt"
                />

              </v-col> -->

              <div class="col-sm-9">
                <div class="row m-b-10 m-l-20">
                  <div class="col-lg-4">
                    <span>รหัส</span>
                    <h5 class="text-muted m-b-5">{{ customer.customer_id }}</h5>
                  </div>
                  <div class="col-lg-4">
                    <span>ชื่อ - นามสกุล</span>
                    <h5 class="text-muted m-b-5">
                      {{ customer.customer_prefix }}
                      {{ customer.customer_fname }}
                      {{ customer.customer_lname }}
                    </h5>
                  </div>
                  <div class="col-lg-4">
                    <span>เลขบัตรประชาชน</span>
                    <h5 class="text-muted m-b-5">
                      {{ customer.customer_idcard }}
                    </h5>
                  </div>
                </div>
                <div class="row m-b-10 m-l-20">
                  <div class="col-lg-4">
                    <span>เพศ</span>
                    <h5 class="text-muted m-b-5">
                      {{ customer.customer_gender }}
                    </h5>
                  </div>
                  <div class="col-lg-4">
                    <span>อายุ</span>
                    <h5 class="text-muted m-b-5">
                      {{ customer.customer_birthdate | sum_birthdate }}
                    </h5>
                  </div>
                  <div class="col-lg-4">
                    <span>กรุ๊ปเลือด</span>
                    <h5 class="text-muted m-b-5">
                      {{ customer.customer_blood }}
                    </h5>
                  </div>
                </div>
                <div class="row m-b-10 m-l-20">
                  <div class="col-lg-4">
                    <span>แพ้ยา</span>
                    <h5 class="text-muted m-b-5">
                      {{ customer.customer_allergic }}
                    </h5>
                  </div>
                  <div class="col-lg-4">
                    <span>โรคประจำตัว</span>
                    <h5 class="text-muted m-b-5">
                      {{ customer.customer_disease }}
                    </h5>
                  </div>
                  
                  <!-- <div class="col-lg-4">
                    <h6 class="text-muted m-b-5">อื่นๆ</h6>
                    <h6>เอ</h6>
                </div> -->
                </div>
              </div>
            </v-row>
          </v-container>
        </v-form>
      </v-card>
    </v-col>

    <v-col cols="12">
    <v-card class="mx-10 pa-5" outlined>
       
        <v-form @submit.prevent="submit" ref="form">
          <v-container>   
          <div >
            <v-row no-gutters>
              <v-col cols="12" md="6">
                <h3 class="ml-3">
                  <v-icon left>mdi-heart</v-icon
                  >{{  "การตรวจข้อมูลเบื้องต้น" }}
                </h3>
                
              </v-col>
              <v-spacer></v-spacer>
              <v-col cols="2" md="1">
              <div class="pt-6 pr-2 "><v-text-field v-model="opd.opd_id" dense disabled outlined></v-text-field></div>
              </v-col>
              <v-col cols="6" md="1">
              <div class=" pr-2"><span>เลขที่การตรวจ</span><v-text-field v-model="opd.opd_code" dense  disabled outlined></v-text-field></div>
              <!-- <div class=" pr-2"><span>เลขที่การตรวจ</span><v-text-field v-model="dataOpdgnr.opd_code" dense  disabled outlined></v-text-field></div> -->
              </v-col>
              <!-- <span>{{ this.$route.params.customer_id_pri }}</span> -->
             <!-- <span :v-model="opd.customer_id_pri" >{{customer.customer_id_pri}}</span> -->
            
             <v-col cols="6" md="1">
                <span>วันที่การตรวจ</span>
              <v-menu
                ref="menu"
                :close-on-content-click="false"
                
                transition="scale-transition"
                offset-y
                min-width="auto"
              >
                <template v-slot:activator="{ on, attrs }">
                 <v-text-field
                    v-model="opd.opd_date"
                    readonly
                    v-bind="attrs"
                    v-on="on"
                    dense
                    outlined
                    
                    :disabled="true"
                  >
            </v-text-field>
                </template>
              </v-menu>
            </v-col>
             
            
            </v-row>
          
            <v-divider class="mt-0"></v-divider>
            <h4>
              <v-icon small left>fa-circle</v-icon>
              {{  ("ข้อมูลทั่วไป") }} ({{  ("ซักประวัติโดย") }} )
            </h4>
            <table class="table table-striped mt-5">
              <tbody>
                <div>
            <v-form>
              <template v-slot:activator="{ on, attrs }">
                  <v-text-field
                    v-model="date"
                    prepend-icon="mdi-calendar"
                    readonly
                    v-bind="attrs"
                    v-on="on"
                    dense
                    outlined
                    class="pt-6"
                  ></v-text-field>
                </template>
            </v-form>
          </div>
          
                <tr>
                  <td>
                    <tr>
                      <td class="set-font-table-td">
                        <v-text-field
                          label="T (อุณหภูมิ) :"
                          dense
                          class="ma-2"
                          v-model="opd.opd_t"
                          hide-details
                          
                          suffix="C."
                        ></v-text-field>
                      </td>
                    </tr>
                  </td>

                  <td>
                    <tr>
                      <td class="set-font-table-td">
                        <v-text-field
                          label="P (อัตราชีพจร) :"
                          dense
                          class="ma-2"
                          v-model="opd.opd_p"
                          hide-details
                          suffix="/min."
                        ></v-text-field>
                      </td>
                    </tr>
                  </td>

                  <td>
                    <tr>
                      <td class="set-font-table-td text-right">
                        <v-text-field
                          label="RR (อัตราการหายใจ) :"
                          dense
                          class="ma-2"
                          v-model="opd.opd_rr"
                          hide-details
                          suffix="/min."
                        ></v-text-field>
                      </td>
                    </tr>
                  </td>

                  <td>
                    <tr>
                      <td class="set-font-table-td text-right">
                        <v-text-field
                          label="BP (ความดันโลหิต) :"
                          dense
                          class="ma-2"
                          v-model="opd.opd_bp"
                          hide-details
                          suffix="/mmHg."
                        ></v-text-field>
                      </td>
                    </tr>
                  </td>
                </tr>
                <tr>
                  <td>
                    <tr>
                      <td class="set-font-table-td text-right">
                        <v-text-field
                          label="หนัก :"
                          dense
                          class="ma-2"
                          v-model="opd.opd_w"
                          hide-details
                          suffix="กก."
                        ></v-text-field>
                      </td>
                    </tr>
                  </td>

                  <td>
                    <tr>
                      <td class="set-font-table-td text-right">
                        <v-text-field
                          label="สูง :"
                          dense
                          class="ma-2"
                          v-model="opd.opd_h"
                          hide-details
                          suffix="ซม."
                        ></v-text-field>
                      </td>
                    </tr>
                  </td>

                  <td>
                    <tr>
                      <td class="set-font-table-td text-right">
                        <v-text-field
                          label="BMI :"
                          dense
                          class="ma-2"
                          v-model="opd_bmi"
                          hide-details
                          disabled
                        ></v-text-field>
                      </td>
                    </tr>
                  </td>

                  <td>
                    <tr>
                      <td class="set-font-table-td text-right">
                        <v-text-field
                          label="FBS :"
                          dense
                          class="ma-2"
                          v-model="opd.opd_fbs"
                          hide-details
                          suffix="mg/dl"
                        ></v-text-field>
                      </td>
                    </tr>
                  </td>
                </tr>
              </tbody>
            </table>
            <h4>
              <v-icon small left>fa-circle</v-icon>
              {{  ("อาการสำคัญ") }} {{ "/"}} {{"ประวัติปัจจุบัน"}} {{ "/"}} {{"ประวัติในอดีต"}}
            </h4>
            <table class="table table-striped mt-5">
              <tbody>
                <tr>
                  <td class="set-font-table-td">
                    <v-text-field
                      label="CC :"
                      dense
                      class="ma-2"
                      v-model="opd.opd_cc"
                      hide-details
                    ></v-text-field>
                  </td>
                  <td class="set-font-table-td">
                    <v-text-field
                      label="HPI :"
                      dense
                      class="ma-2"
                      v-model="opd.opd_hpi"
                      hide-details
                    ></v-text-field>
                  </td>
                  <td class="set-font-table-td text-right">
                    <v-text-field
                      label="PMH :"
                      dense
                      class="ma-2"
                      v-model="opd.opd_pmh"
                      hide-details
                    ></v-text-field>
                  </td>
                </tr>
                
              </tbody>
            </table>
            
            <h4>
              <v-icon small left>fa-circle</v-icon>
              {{  ("การตรวจร่างกาย") }}
            </h4>
            <table class="table table-striped mt-5">
              <tbody>
                <tr>
                  <td class="set-font-table-td">
                    <v-text-field
                      label="PE :"
                      dense
                      class="ma-2"
                      v-model="opd.opd_pe"
                      hide-details
                    ></v-text-field>
                  </td>
                  <td class="set-font-table-td text-right">
                    <v-text-field
                      label="GA :"
                      dense
                      class="ma-2"
                      v-model="opd.opd_ga"
                      hide-details
                    ></v-text-field>
                  </td>
                </tr>
              </tbody>
            </table>
            
            <h4>
              <v-icon small left>fa-circle</v-icon>
              {{  ("การวินิฉัยโรค") }}
            </h4>
            <table class="table table-striped mt-5">
              <tbody>
                <tr>
                  <td class="set-font-table-td">
                    <v-text-field
                      label="DX :"
                      dense
                      class="ma-2"
                      v-model="opd.opd_dx"
                      hide-details
                    ></v-text-field>
                  </td>
                </tr>
              </tbody>
            </table>
            <v-divider class="mt-0"></v-divider>
          </div>
          </v-container>
          <div class="d-flex flex-row-reverse">
            <div class="mr-3">
            <v-btn
              
              color="error"
              class="rounded-lg elevation-3 "
              large
              @click="$router.back('/roomcheck')"
            >
              <v-icon left>mdi-window-close</v-icon>ยกเลิก
            </v-btn>
            </div>
           <v-btn
              color="primary"
              class="me-2 rounded-lg elevation-3 b-0"
              large
              @click="submit"
              
            >
              <v-icon left>mdi-content-save</v-icon>บันทึก
            </v-btn>
            
          </div>
        </v-form>
      </v-card>
    </v-col>
    <v-col cols="12">
    <v-card class="mx-10 pa-5" outlined>
      <v-col cols="12" class="pt-0">
        <h3 class="ml-3">
                  <v-icon left>mdi-heart</v-icon
                  >รายการตรวจ
                </h3>
                <v-col cols="12">
                  <v-text-field
      hide-details
      prepend-icon="search"
      placeholder="Search Product..."
      single-line
      style="width: 250px"
      v-model="searchQuery"
      class="d-none d-sm-flex"
    ></v-text-field>
                </v-col>
                <ReportAdd />
                 
        <v-simple-table dense fixed-header height="470px" class="elevation-1">
          <template v-slot:default>

            <div class="container mx-auto">
    <v-container fluid>
      <v-row dense>
        <v-col v-for="item in products" :key="item.id" cols="12" xs="6" sm="4" md="3" lg="2">
          <v-skeleton-loader v-if="loadingProducts" type="image"></v-skeleton-loader>
          <v-card v-else>
            <v-list-item>
              <v-list-item-content>
                <v-list-item-title class="headline">
                  <h6>{{item.name}}</h6>
                </v-list-item-title>
              </v-list-item-content>
            </v-list-item>
            <!-- <v-img :src="item.image" class="white--text align-end" height="200px"></v-img> -->
            <v-card-actions>
              <v-chip class="mr-2" color="red lighten-1" dark>
                <v-icon left small>euro_symbol</v-icon>
                {{parseInt(item.price).toFixed(2)}}
              </v-chip>
              <v-spacer></v-spacer>
              <v-btn icon v-on:click="addToCart(item)">
                <v-icon>add_shopping_cart</v-icon>
              </v-btn>
              <v-btn icon v-on:click="sharewithsheet.visible = true">
                <v-icon>mdi-share-variant</v-icon>
              </v-btn>
            </v-card-actions>
          </v-card>
        </v-col>
      </v-row>
      <v-fab-transition>
        <v-btn
          fab
          color="red darken-1"
          v-scroll="onScrollBtn"
          v-show="showBtnScrollUp"
          @click="goToTop"
          dark
          fixed
          right
          bottom
        >
          <v-icon>keyboard_arrow_up</v-icon>
        </v-btn>
      </v-fab-transition>
      <v-snackbar v-model="snackbar.visible" bottom :timeout="snackbar.timeout">
        {{ snackbar.text }}
      </v-snackbar>
      <v-bottom-sheet v-model="sharewithsheet.visible">
        <v-list>
          <v-subheader>Share with</v-subheader>
          <v-list-item
            @click="sharewithsheet.visible = false"
            v-for="tile in sharewithRows"
            :key="tile.title"
          >
            <v-list-item-avatar>
              <v-avatar size="32px" tile>
                <img :src="tile.img" :alt="tile.title" />
              </v-avatar>
            </v-list-item-avatar>
            <v-list-item-title>{{tile.title}}</v-list-item-title>
          </v-list-item>
        </v-list>
      </v-bottom-sheet>
    </v-container>
  </div>
      
                <!-- <thead>
                      <tr>
                        <th class="text-left" style="font-size: 14px">#</th>
                        <th class="text-left" style="font-size: 14px">
                          {{ "รหัส" }}
                        </th>
                        <th
                          class="text-left"
                          width="160px"
                          style="font-size: 14px"
                        >
                          {{ "รายการ" }}
                        </th>
                        <th
                          class="text-center"
                          width="80px"
                          style="font-size: 14px"
                        >
                          {{ "จำนวน" }}
                        </th>
                        <th class="text-right" style="font-size: 14px">
                          {{ "ราคา" }}/{{ "หน่วย" }}
                        </th>

                        <th class="text-right" style="font-size: 14px">
                          {{ "ราคารวม" }}
                        </th>
                        <th class="text-center">
                          {{ "ตัวเลือก" }}
                        </th>
                      </tr>
                    </thead> -->
           
    
    </template>
    </v-simple-table>
    </v-col>
    </v-card>
    </v-col>

    <!-- <v-col cols="12">
      <v-card class="mx-10 pa-5">
        <div >
      <div class="col col-12">
        <div class="row py-0">
          <div class="col col-12 col-md-6 py-0">
            <h1>
              <v-icon left>fa-list</v-icon>
              รายการตรวจ
              {{ opd.opd_code }}
            </h1>
          </div>
          
        </div>
        <div class="row">
          <div class="col col-12" >
            <v-simple-table>
              <template v-slot:default>
                <thead>
                  <tr>
                    <th class="text-left">
                      #
                    </th>
                    <th class="text-left">
                      {{       ("เลขที่") }}
                    </th>
                    <th class="text-left">
                      {{       ("รายการตรวจ") }}
                    </th>
                    <th class="text-left">
                      {{       ("รายละเอียดการตรวจ") }}
                    </th>

                    <th class="text-left">
                      {{       ("ค่าบริการ") }}
                    </th>
                    <th class="text-center" width="250px">
                      {{       ("ตัวเลือก") }}
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="(item, index) in cartListCheck" :key="index">
                    <td>{{ index + 1 }}</td>
                    <td>{{ item.opdchecking_temp_code }}</td>
                    <td>
                      {{ item.opdchecking_temp_name }}
                      <v-chip
                        style="background-image: linear-gradient(310deg, #17ad37, #98ec2d);"
                        small
                        text-color="white"
                        v-if="
                          item.checking_set_id == '0' ||
                            item.checking_set_id == null
                        "
                      >
                        {{       ("general") }}
                      </v-chip>
                      <v-chip
                        style="background-image: linear-gradient(310deg, #ea0606, #ff95a5);"
                        small
                        text-color="white"
                        v-if="item.checking_set_id == '1'"
                      >
                        {{       ("single") }}
                      </v-chip>
                      <v-chip
                        style="background-image: linear-gradient(310deg, #ec8200, #f8c17f);"
                        small
                        text-color="white"
                        v-if="item.checking_set_id == '2'"
                      >
                        {{       ("series") }}
                      </v-chip>
                    </td>
                    <td>
                      <ol>
                        <li v-for="(i, index) in item.checklist" :key="index">
                          {{ i.checklist_name }}
                        </li>
                      </ol>
                    </td>
                    <td>
                      <strike v-if="item.opdchecking_temp_discount != 0.0">
                        {{
                          +item.opdchecking_temp_discount +
                            +item.opdchecking_temp_cost
                        }}
                      </strike>

                      {{ item.opdchecking_temp_cost }}
                    </td>
                    <td>{{ item.opdchecking_temp_fee }}</td>
                    <td v-if="statusAdd == 2"></td>
                    <td class="text-center">
                      <v-tooltip color="#212121" top>
                        <template v-slot:activator="{ on, attrs }">
                          <v-btn
                            @click="editCartListCheck(item, index)"
                            icon
                            color="primary"
                            v-bind="attrs"
                            v-on="on"
                          >
                            <v-icon>mdi-pencil-outline</v-icon>
                          </v-btn>
                        </template>
                        <span class="set-font-kanit">{{       ("edit") }}</span>
                      </v-tooltip>
                      <v-tooltip color="#212121" top>
                        <template v-slot:activator="{ on, attrs }">
                          <v-btn
                            @click="
                              confirmDeleteListCheck(item.opdchecking_temp_id)
                            "
                            icon
                            color="error"
                            v-bind="attrs"
                            v-on="on"
                          >
                            <v-icon>mdi-delete-outline</v-icon>
                          </v-btn>
                        </template>
                        <span class="set-font-kanit">{{       ("delete") }}</span>
                      </v-tooltip>
                    </td>
                  </tr>

                  <v-fade-transition leave-absolute>
                    <tr style="background-color:#eeeeee" v-if="statusAdd == 1">
                      <td>{{ data_list.length + 1 }}</td>
                      <td colspan="2">
                        <label style="font-size:14px"
                          >รายการตรวจ
                          <span class="text-danger"> * </span></label
                        >
                        <v-autocomplete
                          v-model="policing_id_pri"
                          :items="policingList"
                          :search-input.sync="search"
                          
                          item-text="policing_name"
                          auto-select-first
                          autofocus
                          item-value="policing_id_pri"
                          :label="ค้นหารายการตรวจ"
                          solo
                        >
                          <template v-slot:no-data>
                            <v-list-item>
                              <v-list-item-title>
                                {{       ("ไม่มีข้อมูล") }} !
                              </v-list-item-title>
                            </v-list-item>
                          </template>
                          <template v-slot:selection="{ item }">
                            {{ item.policing_name }} ({{ item.policing_id }})
                            <v-chip
                              style="background-image: linear-gradient(310deg, #17ad37, #98ec2d);"
                              small
                              text-color="white"
                              v-if="
                                item.checking_set_id == '0' ||
                                  item.checking_set_id == null
                              "
                            >
                              {{       ("general") }}
                            </v-chip>
                            <v-chip
                              style="background-image: linear-gradient(310deg, #ea0606, #ff95a5);"
                              small
                              text-color="white"
                              v-if="item.checking_set_id == '1'"
                            >
                              {{       ("single") }}
                            </v-chip>
                            <v-chip
                              style="background-image: linear-gradient(310deg, #ec8200, #f8c17f);"
                              small
                              text-color="white"
                              v-if="item.checking_set_id == '2'"
                            >
                              {{       ("series") }}
                            </v-chip>
                          </template>
                          <template v-slot:item="{ item }">
                            <v-list-item-content>
                              <v-list-item-title
                                >{{ item.policing_name }} ({{
                                  item.policing_id
                                }})</v-list-item-title
                              >
                            </v-list-item-content>
                            <v-list-item-action>
                              <v-chip
                                style="background-image: linear-gradient(310deg, #17ad37, #98ec2d);"
                                small
                                text-color="white"
                                v-if="
                                  item.checking_set_id == '0' ||
                                    item.checking_set_id == null
                                "
                              >
                                {{       ("general") }}
                              </v-chip>
                              <v-chip
                                style="background-image: linear-gradient(310deg, #ea0606, #ff95a5);"
                                small
                                text-color="white"
                                v-if="item.checking_set_id == '1'"
                              >
                                {{       ("single") }}
                              </v-chip>
                              <v-chip
                                style="background-image: linear-gradient(310deg, #ec8200, #f8c17f);"
                                small
                                text-color="white"
                                v-if="item.checking_set_id == '2'"
                              >
                                {{       ("series") }}
                              </v-chip>
                            </v-list-item-action>
                          </template>
                        </v-autocomplete>
                      </td>
                      <td class="text-left">
                        <v-btn
                          color="success"
                          @click="savelistopd"
                          outlined
                          class="rounded-lg elevation-3 me-2"
                        >
                          <v-icon>mdi-check</v-icon>ยืนยัน
                        </v-btn>
                        <v-btn
                          color="error"
                          outlined
                          @click="(checking_id = ''), (statusAdd = 0)"
                          class="rounded-lg elevation-3"
                        >
                          <v-icon>mdi-delete-outline</v-icon>ลบ
                        </v-btn>
                       
                      </td>

                      <td colspan="3" class="text-right"></td>
                    </tr>
                  </v-fade-transition>

                  <v-fade-transition leave-absolute>
                    <tr style="background-color:#eeeeee" v-if="statusAdd == 2">
                      <td>{{ indexEdit + 1 }}</td>
                      <td>
                        {{ dataEdit.opdchecking_temp_code }}
                      </td>
                      <td>
                        {{ dataEdit.opdchecking_temp_name }}
                        <v-chip
                          style="background-image: linear-gradient(310deg, #17ad37, #98ec2d);"
                          small
                          text-color="white"
                          v-if="
                            dataEdit.checking_set_id == '0' ||
                              dataEdit.checking_set_id == null
                          "
                        >
                          {{       ("general") }}
                        </v-chip>
                        <v-chip
                          style="background-image: linear-gradient(310deg, #ea0606, #ff95a5);"
                          small
                          text-color="white"
                          v-if="dataEdit.checking_set_id == '1'"
                        >
                          {{       ("single") }}
                        </v-chip>
                        <v-chip
                          style="background-image: linear-gradient(310deg, #ec8200, #f8c17f);"
                          small
                          text-color="white"
                          v-if="dataEdit.checking_set_id == '2'"
                        >
                          {{       ("series") }}
                        </v-chip>
                      </td>

                      <td>
                        <label style="font-size:14px"
                          >{{       ("examination_fee") }}
                          <span class="text-danger"> * </span></label
                        >
                        <v-text-field
                          solo
                          hide-details
                          class="mb-3"
                          v-model.trim="sum"
                        >
                        </v-text-field>
                      </td>
                      <td>
                        <label style="font-size:14px"
                          >{{       ("doctor_fee") }}
                          <span class="text-danger"> * </span></label
                        >
                        <v-text-field
                          solo
                          hide-details
                          class="mb-3"
                          type="number"
                          v-model.trim="dataEdit.opdchecking_temp_fee"
                        ></v-text-field>
                      </td>
                      <td>
                        <label style="font-size:14px"
                          >{{       ("discount") }}
                          <span class="text-danger"> * </span></label
                        >
                        <v-text-field
                          solo
                          hide-details
                          class="mb-3"
                          type="number"
                          v-model.trim="dataEdit.opdchecking_temp_discount"
                        ></v-text-field>
                      </td>
                      <td>
                        <label style="font-size:14px"
                          >{{       ("total") }}
                          <span class="text-danger"> * </span></label
                        >
                        <v-text-field
                          solo
                          hide-details
                          disabled
                          class="mb-3"
                          type="number"
                          v-model="totalPrice"
                        ></v-text-field>
                      </td>
                      <td>
                        <v-btn
                          color="success"
                          @click="updateListCheck"
                          outlined
                          class="rounded-lg elevation-3 me-2"
                        >
                          <v-icon>mdi-check</v-icon> {{       ("confirm") }}
                        </v-btn>
                        <v-btn
                          color="error"
                          outlined
                          @click="(checking_id = ''), (statusAdd = 0)"
                          class="rounded-lg elevation-3"
                        >
                          <v-icon>mdi-delete-outline</v-icon> {{       ("cancel") }}
                        </v-btn>
                      </td>
                    </tr>
                  </v-fade-transition>
                   <v-fade-transition leave-absolute>
                    <tr v-if="statusAdd == 0">
                      <td colspan="7">
                        <v-btn
                          @click="statusAdd = 1"
                          color="primary"
                          outlined
                          x-large
                          class="rounded-lg elevation-3 my-2"
                        >
                          <v-icon small left>mdi-plus</v-icon> เพิ่มรายการตรวจ
                        </v-btn>
                      </td>
                    </tr>
                  </v-fade-transition>
                </tbody>
              </template>
            </v-simple-table>
            <v-divider class="mb-0"></v-divider>
          </div>
          <div class="col col-12 col-sm-12 col-md-6">
            <label for="">หมายเหตุ</label>
            <v-textarea
              ref="myTextEditor"
              
              :options="editorOption"
              class="pb-2"
              solo
              label="กรุณากรอกที่นี่"
            >
            </v-textarea>
          </div>
          <div class="col col-12 col-sm-12 col-md-6 text-right ">
            <table class="table table-striped mt-7">
              <tbody>
                <tr>
                  <td class="set-font-table-th text-right" >รวมค่าบริการ</td>
                  <td class="set-font-table-td text-right" >
                    {{ cartCheck | formatPrice }}
                  </td>
                </tr>
              </tbody>
            </table>
            <div class="justify-md-end">
           <v-btn
              color="primary"
              class="me-2 rounded-lg elevation-3 b-0"
              large
              :disabled="cartListCheck == 0"
              @click="saveListCheck()"
            >
              <v-icon left>mdi-content-save</v-icon>{{       ("บันทึก") }}
            </v-btn>
            <v-btn
              @click="$router.back()"
              color="error"
              class="rounded-lg elevation-3"
              large
            >
              <v-icon left>mdi-window-close</v-icon>{{       ("ยกเลิก") }}
            </v-btn>
          </div>
            
          </div>
        </div>
      </div>
    </div>
      </v-card>
      </v-col> -->
  </v-container>
</template>

<script>
import axios from "axios";
import api from "@/services/api";
import { sum_birthdate } from "@/components/hooks/filterdate";
import ReportAdd from "@/components/cards/ReportAdd";

export default {
  data() {
    return {
      headers: [
        {
          text: "เลขที่",
          align: "left",

          value: "",
        },
        { text: "วันที่", value: "" },
        { text: "รายการตรวจ", value: "" },
        { text: "รายการรักษา", value: "" },
        { text: "แพทย์ผู้ดำเนินการ", value: "" },
      ],
      opd_bmi: "",
      statusAdd:0,
      dataEdit: {},
      totalPrice: 0,
      policingList: [],
      data_list:[],
      // cartListCheck:[],
      dataOpdgnr:{},
      opdID:"",
      blob_image:"",
      customerData:{},
      
      mDataarray:[],
      pageLoaded: false,
      products: null,
      searchQuery: "",
      cart: [],
      loadingProducts: true,
      cart: [],
      showBtnScrollUp: false,
      snackbar: {
        visible: false,
        timeout: 700,
        text: ""
      },
      sharewithsheet: {
        visible: false
      },
      sharewithRows: [
        {
          img: "https://cdn.vuetifyjs.com/images/bottom-sheets/keep.png",
          title: "Keep"
        },
        {
          img: "https://cdn.vuetifyjs.com/images/bottom-sheets/inbox.png",
          title: "Inbox"
        },
        {
          img: "https://cdn.vuetifyjs.com/images/bottom-sheets/hangouts.png",
          title: "Hangouts"
        },
        {
          img: "https://cdn.vuetifyjs.com/images/bottom-sheets/messenger.png",
          title: "Messenger"
        },
        {
          img: "https://cdn.vuetifyjs.com/images/bottom-sheets/google.png",
          title: "Google+"
        }
      ],
      customer: {
        customer_id: "",
        customer_fname: "",
        customer_lname: "",
        customer_birthdate: "",
        customer_prefix: "",
        customer_gender: "",
        customer_idcard: "",
        customer_blood: "",
        customer_tel: "",
        customer_email: "",
        customer_address: "",
        customer_district: "",
        customer_amphoe: "",
        customer_province: "",
        customer_zipcode: "",
        customer_allergic: "",
        customer_disease: "",
        customer_comment: "",
        customer_image: null,
      },
      // customer:{},
      policing_temp: {
        opdpolicing_code:"",
        opdpolicing_name:"",
        opdpolicing_cost:"",
        opd_id:"",
        policing_id_pri:"",
      },
  
      opd:{
        opd_id:"",
        opd_code:"",
        customer_id_pri:"",
        opd_date:new Date(Date.now() - new Date().getTimezoneOffset() * 60000)
        .toISOString()
        .substr(0, 10),
        opd_t:"",
        opd_p:"",
        opd_rr:"",
        opd_bp:"",
        opd_w:"",
        opd_h: "",
        opd_bmi:"",
        opd_fbs:"",
        opd_pe:"",
        opd_ga:"",
        opd_cc:"",
        opd_hpi:"",
        opd_pmh:"",
        opd_dx:"",
        opd_check: "1"
      },
      customerFile: null,
    };
  },
  async mounted() { 
    // let result1 = await api.getCustomerOpd(this.$route.params.opd_id);
    // this.customer = result1.data;

    //***ตัวเดิม params customer_id_pri */
    let result1 = await api.getCustomerById(this.$route.params.opd_id);
    this.customer = result1.data;

    let result = await api.getOpdById(this.$route.params.opd_id)
    this.opd = result.data;

    this.getPolicingList();

     this.cart = localStorage.getItem("cart")
      ? JSON.parse(localStorage.getItem("cart"))
      : [];

    axios.get("https://hplussport.com/api/products/order/price").then(res => {
      this.products = res.data;
    });

    // this.opdID = this.$route.params.opd_id;
    // let result = await api.getOpdById(this.$route.params.opd_id)
    // this.opdID = result.data;
    // this.getOpdgeneral();
  },

  methods: {

  //  async savelistopd(){
  //     // let body = {
  //     //   opd_id: this.opd.opd_id,
  //     //   policing_id_pri: this.policing_id_pri
  //     // };
  //      let body = {
  //       opd_id: this.opd.opd_id,
  //       policing_id_pri: this.policing_id_pri,
  //       opdpolicing_code: this.opdpolicing_code,
  //       opdpolicing_name: this.opdpolicing_name,
  //       opdpolicing_cost: this.opdpolicing_cost,
  //     };
  //     console.log("add list", body)
  //     // let data = await addopdPolicing({
  //     //   path: "policing_temp",
  //     //   body: body
  //     // });
  //     await api.addopdPolicing(body);
  //     data.response
  //       ? this.$notify.success({
  //           title: ("สำเร็จ"),
  //           message: ("เพิ่มข้อมูลสำเร็จ"),
  //         })
  //       : this.$notify.error({
  //           title: ("ผิดพลาด"),
  //           message: data.message,
  //         });
  //         this.getopdPolicing();
  //         this.statusAdd = 0
  //         this.cartListCheck = data.data 
  //   },

  // async savelistopd(){
  //   this.statusAdd = 0
  //   this.opd_id = this.opd_id,
  //   this.policing_id_pri = this.policing_id_pri
  //   let formData = new FormData
  //   const {
  //     opdpolicing_code,
  //     opdpolicing_name,
  //     opdpolicing_cost,
  //     opd_id,
  //     policing_id_pri
  //   } = this.policing_temp

  //   formData.append("opdpolicing_code", opdpolicing_code)
  //   formData.append("opdpolicing_name", opdpolicing_name)
  //   formData.append("opdpolicing_cost", opdpolicing_cost)
  //   formData.append("opd_id", opd_id)
  //   formData.append("policing_id_pri", policing_id_pri)

  //   console.log("test", formData)

  //   await api.addopdPolicing(formData);
  // },
    getCustomerImage() {
      if (this.customer.customer_image?.length > 100) {
        return this.customer.customer_image;
      } else {
        return this.$options.filters.imageUrl(this.customer.customer_image);
      }
    },

    // onFileSelected(event) {
    //   const reader = new FileReader();
    //   reader.onload = (event) => {
    //     // previews image
    //     this.customer.customer_image = event.target.result;
    //   };
    //   reader.readAsDataURL(event.target.files[0]);
    //   // upload image
    //   this.customerFile = event.target.files[0];
    // },
    async  getPolicingList() {
     let datapolicingList = await api.getPolicings();
     this.policingList = datapolicingList.data
     this.policing_name = datapolicingList.data[0].policling_id_pri

     console.log("policing List", datapolicingList.data )
    },
    // async getOpdgeneral(){
    //   let data = await api.getOpdById({
    //     path: "opd",
    //     // param:`${this.opdID}/opd_id/${opd_id}` 
    //     param:`${this.opdID}` 
    //     // param: this.opd_id
    //   });
    //   this.dataOpdgnr = data.data
    //   this.customer_id_pri = data.data.customer_id_pri
    //   this.getCustomer(data.data.customer_id_pri);
    //   console.log("dataopd", data.data)
    //   console.log("dataopd", data.data.customer_id_pri)
    // },

    // async getCustomer(id){
    //   let dataCustomerRes = await api.getCustomers({
    //     path: "customer",
    //     param: id
    //   });
    //   if(dataCustomerRes != null){
    //     this.customer = dataCustomerRes.data[0];
    //     this.blob_image = dataCustomerRes.data[0].customer_image;
    //   } else {
    //     this.customer = null;
    //   }
    // },
    
    customFilter(item, queryText, itemText) {
      if (item.policing_id && item.policing_name) {
        const textOne = item.policing_id.toLowerCase();
        const textTwo = item.policing_name.toLowerCase();
        const searchText = queryText.toLowerCase();
        return (
          textOne.indexOf(searchText) > -1 || textTwo.indexOf(searchText) > -1
        );
      }
    },
  async  submit() {
    this.opd.opd_bmi = this.opd_bmi;
    this.opd.opd_check = this.opd_check
      let formData = new FormData();
      const{
        opd_id,
        opd_code,
        customer_id_pri,
        opd_date,
        opd_t,
        opd_p,
        opd_rr,
        opd_bp,
        opd_w,
        opd_bmi,
        opd_h,
        opd_fbs,
        opd_pe,
        opd_ga,
        opd_cc,
        opd_hpi,
        opd_pmh,
        opd_dx,
        opd_check
      } = this.opd;   
      { 
        formData.append("opd_id", opd_id);
        formData.append("opd_code", opd_code);
        formData.append("customer_id_pri", customer_id_pri);
        formData.append("opd_date", opd_date);
        formData.append("opd_t", opd_t);
        formData.append("opd_p", opd_p);
        formData.append("opd_rr", opd_rr);
        formData.append("opd_bp", opd_bp);
        formData.append("opd_w", opd_w);
        formData.append("opd_h", opd_h);
        formData.append("opd_bmi", opd_bmi);
        formData.append("opd_fbs", opd_fbs);
        formData.append("opd_pe", opd_pe);
        formData.append("opd_ga", opd_ga);
        formData.append("opd_cc", opd_cc);
        formData.append("opd_hpi", opd_hpi);
        formData.append("opd_pmh", opd_pmh);
        formData.append("opd_dx", opd_dx);
        formData.append("opd_check", opd_check);
        await api.updateOpd(formData);
        // await api.addOpd(formData);
        
        
        // this.$router.back();
        // this.$router.push("/report");
       
        this.$router.push(`/report/${customer_id_pri}`) 
      }
      
     
    },
    productAddedMessage: function() {
      this.snackbar.visible = true;
      this.snackbar.text = "Product added to your cart";
    },
    addToCart: function(item) {
      let indexProduct = this.cart.findIndex(p => p.id === item.id);
      if (indexProduct > -1) {
        let tempProduct = this.cart[indexProduct];
        this.cart.splice(indexProduct, 1);
        tempProduct.quantity++;
        this.cart.push(tempProduct);
      } else {
        item.quantity = 1;
        this.cart.push(item);
      }
      this.productAddedMessage();
    },
    searchProducts: function(query) {
      this.searchQuery = query;
    },
    addCart: function(products) {
      this.cart = products;
      localStorage.setItem("cart", JSON.stringify(products));
    },
    goToTop: function() {
      this.$vuetify.goTo(0);
    },
    onScrollBtn: function(event) {
      this.showBtnScrollUp =
        (window.pageYOffset || event.target.scrollTop || 0) > 40;
    },

  },
  components:{
    ReportAdd,
  },
  watch:{
    //     async "opd.opd_t"(value) {
    //   this.statusLoadData = false;
    //   this.options.series[0].data[0] = await +value;
    //   this.statusLoadData = true;
    // },
    // async "opd.opd_p"(value) {
    //   this.statusLoadData = false;
    //   this.options.series[0].data[1] = await +value;
    //   this.statusLoadData = true;
    // },
    // async "opd.opd_rr"(value) {
    //   this.statusLoadData = false;
    //   this.options.series[0].data[2] = await +value;
    //   this.statusLoadData = true;
    // },
    // async "opd.opd_bp"(value) {
    //   this.statusLoadData = false;
    //   this.options.series[0].data[3] = await +value;
    //   this.statusLoadData = true;
    // },
    // async opd_bmi(value) {
    //   this.statusLoadData = false;
    //   this.options.series[0].data[4] = await +value;
    //   this.statusLoadData = true;
    // },
    // async "opd.opd_fbs"(value) {
    //   this.statusLoadData = false;
    //   this.options.series[0].data[5] = await +value;
    //   this.statusLoadData = true;
    // },
    "opd.opd_w"(value) {
      if (value) {
        this.opd_bmi =
          value / ((this.opd.opd_h / 100) * (this.opd.opd_h / 100));
        this.opd_bmi = this.opd_bmi.toFixed(2);
      } else {
        this.opd_bmi = "";
      }
    },
    "opd.opd_h"(value) {
      if (value) {
        this.opd_bmi = this.opd.opd_w / ((value / 100) * (value / 100));
        this.opd_bmi = this.opd_bmi.toFixed(2);
      } else {
        this.opd_bmi = "";
      }
    },
    sum(value) {
      this.totalPrice = + value
    },
    statusAdd(value){
      if(value == 1){
        this.sum = +this.dataEdit.policing_cost
      }
    },
     cart: function() {
      this.$emit("addCart", this.cart);
    }
   
    
  },
   computed: {
    subtotalCart: function() {
      let sum = 0;
      this.cart.map(p => {
        sum += parseInt(p.price) * p.quantity;
      });

      return sum;
    },
    filteredProducts: function() {
      return this.products
        ? this.products.filter(p =>
            p.name.toLowerCase().match(this.searchQuery.toLowerCase())
          )
        : this.products;
    }
  },

  // async mounted() {
  //   this.loadCustomerData();
  // },
  
  
  filters: {
    sum_birthdate,
  },
};
</script>

<style>
</style>



<v-simple-table
              dense
              fixed-header
              height="470px"
              class="elevation-1"
            >
              <template v-slot:default>
                <thead>
                  <tr>
                    <th class="text-left" style="font-size: 14px">#</th>
                    <th class="text-left" style="font-size: 14px">
                      {{ "รหัส" }}
                    </th>
                    <th class="text-left" width="160px" style="font-size: 14px">
                      {{ "รายการ" }}
                    </th>
                    <th
                      class="text-center"
                      width="80px"
                      style="font-size: 14px"
                    >
                      {{ "จำนวน" }}
                    </th>
                    <th class="text-right" style="font-size: 14px">
                      {{ "ราคา" }}/{{ "หน่วย" }}
                    </th>

                    <th class="text-right" style="font-size: 14px">
                      {{ "ราคารวม" }}
                    </th>
                    <th class="text-center">
                      {{ "ตัวเลือก" }}
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="(item, index) in cart" :key="index">
                  <!-- <tr v-for="item in cart" :key="item"> -->
                    <!-- <tr > -->
                    <!-- <td>
                            <label>รายการตรวจ</label>
                            <v-text-field
                              hide-details
                            style="width: 105px"
                            class="mb-2"
                            disabled
                            solo
                            dense
                            ></v-text-field>
                          </td> -->
                    <!-- <td>{{ item + 1 }}</td> -->
                    <td>{{ cart.indexOf(item) + 1 }}</td>
                    <td>
                      {{ item.order.policing_id }} {{ item.order.drug_id }}
                    </td>
                    <td>
                      {{ item.order.policing_name }} {{ item.order.drug_name }}
                    </td>
                    <td class="text-center">{{ item.order.order_amount }}</td>
                    <td class="text-right">
                      {{ item.order.policing_cost }} {{ item.order.drug_price }}
                    </td>
                    <td class="text-right">{{ item.order.order_total }}</td>
                    <td>{{ item.totalPrice }}</td>
                    
                    
                    <!-- <td class="text-center">
                          {{ item.orderdetail_temp_amount }}
                        </td> -->
                    <!-- <td class="text-right">
                          {{
                            item.checking_id
                              ? item.orderdetail_temp_cost
                              : item.orderdetail_temp_price
                          }}
                        </td> -->
                    <!-- <td class="text-right">
                          {{ item.orderdetail_temp_discount }}
                        </td>
                        <td class="text-right">
                          {{ item.cartData.policing_id_pri }}
                        </td>
                        <td class="text-right">
                          {{ item.cartData.order_total }}
                        </td> -->
                  </tr>
                  <tr v-if="statusAdd == 1">
                    <td colspan="3">
                      <label style="fonr-size: 0.5rem"> โปรดเลือกยา </label>
                      <v-autocomplete
                        :no-data-text="`${'ไม่มีข้อมูล'} !`"
                        :items="drugList"
                        class="mb-2"
                        :disabled="statusEditDrug"
                        item-value="drug_id_pri"
                        item-text="drug_name"
                        solo
                        dense
                        v-model="order"
                        return-object
                        style="width: 250px"
                        auto-select-first
                        hide-details
                      >
                        <template v-slot:item="{ item }">
                          <v-row>
                            <v-col
                              cols="12"
                              class="d-flex justify-content-between"
                            >
                              <p>{{ item.drug_name }}</p>
                              <p>{{ item.drug_id }}</p>
                            </v-col>
                          </v-row>
                        </template>
                        <template v-slot:selection="{ item }">
                          ({{ item.drug_id }}) {{ item.drug_name }}
                        </template>
                      </v-autocomplete>
                    </td>
                    <td>
                      <label>จำนวน</label>
                      <v-text-field
                        hide-details
                        v-model="quantity"
                        style="width: 90px"
                        class="mb-2"
                        solo
                        type="number"
                        dense
                      ></v-text-field>
                    </td>
                    <td>
                      <label>ราคา</label>
                      <v-text-field
                        hide-details
                        v-model="order.drug_price"
                        style="width: 90px"
                        class="mb-2"
                        disabled
                        type="number"
                        solo
                        dense
                      ></v-text-field>
                    </td>
                    <!-- <td>
                          <label>{{ "discount_unit" }}</label>
                          <v-text-field
                            hide-details
                            style="width: 90px"
                            type="number"
                            class="mb-2"
                            solo
                            v-model="discount"
                            dense
                          ></v-text-field>
                        </td> -->
                    <td>
                      <label>ราคารวม</label>
                      <v-text-field
                        hide-details
                        v-model="sum"
                        style="width: 90px"
                        disabled
                        type="number"
                        class="mb-2"
                        solo
                        dense
                      ></v-text-field>
                    </td>
                    <!-- <td></td> -->
                    <td class="text-right">
                      <v-tooltip color="#212121" top>
                        <template v-slot:activator="{ on, attrs }">
                          <v-btn
                            @click="addDrugToCart()"
                            icon
                            color="success"
                            v-bind="attrs"
                            v-on="on"
                          >
                            <v-icon>mdi-checkbox-marked-circle-outline</v-icon>
                          </v-btn>
                        </template>
                        <span class="set-font-kanit">{{ "confirm" }}</span>
                      </v-tooltip>
                      <v-tooltip color="#212121" top>
                        <template v-slot:activator="{ on, attrs }">
                          <v-btn
                            @click="(statusAdd = 0), (statusEditDrug = false)"
                            icon
                            color="error"
                            v-bind="attrs"
                            v-on="on"
                          >
                            <v-icon>mdi-delete-outline</v-icon>
                          </v-btn>
                        </template>
                        <span class="set-font-kanit">{{ "cancel" }}</span>
                      </v-tooltip>
                    </td>
                  </tr>

                  <tr v-if="statusAdd == 2">
                    <td colspan="3">
                      <label style="fonr-size: 0.5rem">{{
                        "เลือกรายการตรวจ"
                      }}</label>
                      <v-autocomplete
                        :no-data-text="`${'ไม่มีข้อมูล'} !`"
                        :items="policingList"
                        class="mb-2"
                        item-text="policing_name"
                        item-value="policing_id_pri"
                        v-model="order"
                        solo
                        return-object
                        dense
                        style="width: 230px"
                        auto-select-first
                        hide-details
                      >
                        <template v-slot:item="{ item }">
                          {{ item.policing_name }} ({{ item.policing_id }})
                          <v-chip
                            style="
                              background-image: linear-gradient(
                                310deg,
                                #17ad37,
                                #98ec2d
                              );
                            "
                            small
                            text-color="white"
                          >
                            ตรวจทั่วไป
                          </v-chip>
                        </template>
                        <template v-slot:selection="{ item }">
                          ({{ item.policing_id }}) ({{ item.policing_name }})
                          <v-chip
                            style="background-image: linear-gradient(310deg, #17ad37, #98ec2d);"
                            small
                            text-color="white"
                          >
                            ตรวจทั่วไป
                          </v-chip>
                        </template>
                      </v-autocomplete>
                    </td>
                    <td>
                      <label>ชื่อรายการ</label>
                      <v-text-field
                        hide-details
                        style="width: 105px"
                        class="mb-2"
                        disabled
                        solo
                        dense
                        v-model="order.policing_name"
                      ></v-text-field>
                    </td>
                    <td>
                      <label>จำนวน</label>
                      <v-text-field
                        hide-details
                        style="width: 105px"
                        class="mb-2"
                        disabled
                        type="number"
                        solo
                        dense
                        v-model="quantity"
                      ></v-text-field>
                    </td>
                    <!-- <td>
                          <label>รหัสลูกค้า</label>
                          <v-text-field
                            hide-details
                            style="width: 105px"
                            disabled
                            class="mb-2"
                            v-model="Policingselect.customer_id_pri"
                            solo
                            dense
                          ></v-text-field>
                        </td> -->
                    <td>
                      <label>ราคาการตรวจ</label>
                      <v-text-field
                        hide-details
                        style="width: 105px"
                        disabled
                        type="number"
                        class="mb-2"
                        v-model="order.policing_cost"
                        solo
                        dense
                      ></v-text-field>
                    </td>
                    <td>
                      <label>ราคารวม</label>
                      <v-text-field
                        hide-details
                        style="width: 105px"
                        disabled
                        type="number"
                        class="mb-2"
                        v-model="order.policing_cost"
                        solo
                        dense
                      ></v-text-field>
                    </td>
                    <!-- <td></td> -->
                    <td colspan="2" class="text-right">
                      <v-tooltip color="#212121" top>
                        <template v-slot:activator="{ on, attrs }">
                          <v-btn
                            @click="addToCart()"
                            icon
                            color="success"
                            v-bind="attrs"
                            v-on="on"
                          >
                            <v-icon>mdi-checkbox-marked-circle-outline</v-icon>
                          </v-btn>
                        </template>
                        <span class="set-font-kanit">ยืนยัน</span>
                      </v-tooltip>
                      <v-tooltip color="#212121" top>
                        <template v-slot:activator="{ on, attrs }">
                          <v-btn
                            @click="statusAdd = 0"
                            icon
                            color="error"
                            v-bind="attrs"
                            v-on="on"
                          >
                            <v-icon>mdi-delete-outline</v-icon>
                          </v-btn>
                        </template>
                        <span class="set-font-kanit">{{ "cancel" }}</span>
                      </v-tooltip>
                    </td>
                  </tr>
                  <tr v-if="statusAdd == 0">
                    <td colspan="9">
                      <v-btn
                        outlined
                        class="rounded-lg elevation-3 me-2"
                        color="primary"
                        @click="addDrug()"
                      >
                        <v-icon left small>mdi-plus</v-icon>{{ "ยา" }}
                      </v-btn>
                      <v-btn
                        outlined
                        @click="addPolicing()"
                        class="rounded-lg elevation-3 me-2"
                        color="success"
                      >
                        <v-icon left small>mdi-plus</v-icon>{{ "รายการตรวจ" }}
                      </v-btn>
                    </td>
                  </tr>
                </tbody>
              </template>
            </v-simple-table>




            // ข้อมูลแบบ v-data-table
            <v-data-table :headers="headers" :items="cart">
              
            <template v-slot:[`item.datalist`]="{ item }">
          {{ cart.indexOf(item) + 1 }}
        </template>
        <template v-slot:[`cart.order_name`]="{ cart }">
          {{ cart.order_name }}
        </template>

        <template v-slot:[`cart.order_price`]="{ cart }">
          {{ cart.order_price }}
        </template>
           
          </v-data-table>